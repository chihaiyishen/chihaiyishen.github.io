<!DOCTYPE html>
<html lang="zh">
    <head>
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.3 -->

    <!-- Title -->
    
    <title>
        
            Kotlin 之旅 四 | 
        
        痴海博客
    </title>

    <!-- Meta & Info -->
    <meta charset="utf-8">

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    

    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Koc">
    <meta name="description" content="null">
    <meta name="keywords" content="Android，Kotlin，自学编程,Kotlin">

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="痴海博客">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Kotlin 之旅 四 | 痴海博客">
    <meta property="og:description" content="null">
    <meta property="og:article:tag" content="Kotlin"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS & jQuery -->
    
        <link rel="stylesheet" href="/css/material.min.css">
        <link rel="stylesheet" href="/css/style.min.css">
        <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(http://img1.50tu.com/bizhi/guanggao/2014-01-07/c761aed9407bcac25acc0cd23fdf2eab.jpg);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


        <script src="/js/jquery.min.js"></script>
        <script src="/js/queue.js"></script>
    

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    


    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Kotlin-之旅四"><span class="post-toc-number">1.</span> <span class="post-toc-text">Kotlin 之旅四</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#类和对象"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">类和对象</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#类和继承"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">类和继承</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#类"><span class="post-toc-number">1.1.1.1.</span> <span class="post-toc-text">类</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#构造函数"><span class="post-toc-number">1.1.1.2.</span> <span class="post-toc-text">构造函数</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#次构造函数"><span class="post-toc-number">1.1.1.3.</span> <span class="post-toc-text">次构造函数</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#创建了类的实例"><span class="post-toc-number">1.1.1.4.</span> <span class="post-toc-text">创建了类的实例</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#类成员"><span class="post-toc-number">1.1.1.5.</span> <span class="post-toc-text">类成员</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#继承"><span class="post-toc-number">1.1.1.6.</span> <span class="post-toc-text">继承</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#覆盖方法"><span class="post-toc-number">1.1.1.6.1.</span> <span class="post-toc-text">覆盖方法</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#覆盖属性"><span class="post-toc-number">1.1.1.6.2.</span> <span class="post-toc-text">覆盖属性</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#覆盖规则"><span class="post-toc-number">1.1.1.6.3.</span> <span class="post-toc-text">覆盖规则</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#抽象类"><span class="post-toc-number">1.1.1.7.</span> <span class="post-toc-text">抽象类</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#伴生对象"><span class="post-toc-number">1.1.1.8.</span> <span class="post-toc-text">伴生对象</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#属性和字段"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">属性和字段</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#声明属性"><span class="post-toc-number">1.1.2.1.</span> <span class="post-toc-text">声明属性</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Getters-和-Setters"><span class="post-toc-number">1.1.2.2.</span> <span class="post-toc-text">Getters 和 Setters</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#幕后字段"><span class="post-toc-number">1.1.2.3.</span> <span class="post-toc-text">幕后字段</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#幕后属性"><span class="post-toc-number">1.1.2.4.</span> <span class="post-toc-text">幕后属性</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#编译期常量"><span class="post-toc-number">1.1.2.5.</span> <span class="post-toc-text">编译期常量</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#惰性初始化属性"><span class="post-toc-number">1.1.2.6.</span> <span class="post-toc-text">惰性初始化属性</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#覆盖属性-1"><span class="post-toc-number">1.1.2.7.</span> <span class="post-toc-text">覆盖属性</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#委托属性"><span class="post-toc-number">1.1.2.8.</span> <span class="post-toc-text">委托属性</span></a></li></ol></li></ol></li></ol></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(http://i.imgur.com/kRyUww0.jpg)">
    
            <p class="article-headline-p">
                Kotlin 之旅 四
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="http://imgtu.5011.net/uploads/content/20170620/9403141497925594.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Koc</strong>
        <span>7月 19, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Kotlin/">Kotlin</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Kotlin 之旅 四&url=http://yoursite.com//2017/07/19/Kotlin 之旅四/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Kotlin 之旅 四&url=http://yoursite.com//2017/07/19/Kotlin 之旅四/index.html&via=Koc" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com//2017/07/19/Kotlin 之旅四/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://yoursite.com//2017/07/19/Kotlin 之旅四/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h1 id="Kotlin-之旅四"><a href="#Kotlin-之旅四" class="headerlink" title="Kotlin 之旅四"></a>Kotlin 之旅四</h1><p><img src="http://i.imgur.com/gkwCGdp.png" alt=""></p>
<h2 id="类和对象"><a href="#类和对象" class="headerlink" title="类和对象"></a>类和对象</h2><p>所有对象相关的</p>
<ul>
<li>类和继承</li>
<li>属性和字段</li>
<li>接口</li>
<li>可见性修饰符</li>
<li>扩展</li>
<li>数据类</li>
<li>密封类</li>
<li>泛型</li>
<li>嵌套了</li>
<li>枚举类</li>
<li>对象</li>
<li>委托</li>
<li>委托属性</li>
</ul>
<h3 id="类和继承"><a href="#类和继承" class="headerlink" title="类和继承"></a>类和继承</h3><h4 id="类"><a href="#类" class="headerlink" title="类"></a>类</h4><p>Kotlin 中使用关键字 class 声明类</p>
<pre><code>class Invoice{}
</code></pre><p>类声明由类名，类头（指定其类型参数，主构造函数等）和由大括号包围的类体构成。类头和类体都是可选的。如果一个类没有类体，可以省略花括号。</p>
<pre><code>class Empty
</code></pre><h4 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h4><p>在 Kotlin 中的一个类可以有一个主构造函数和一个或多个次构造函数，主构造函数是类头的一部分：它跟在类名（和可选的类型参数）后。</p>
<pre><code>class Person constructor(firstName: String){}
</code></pre><p>如果主构造含食宿没有任何注解或者可见性修饰符，可以省略这个 constructor 关键字</p>
<pre><code>class Person(firstName: String){}
</code></pre><p>主构造函数不能包含任何的代码，初始化的代码可以放到以 init 关键字作为前缀的初始化快（initializer blocks）中</p>
<pre><code>calss Customer(name: String){
    init {
        logger.info(&quot;Customer initialized with value ${name}&quot;)
    }
}
</code></pre><p>注意主构造的参数可以在初始化快中使用,它们也可以在类体内声明的属性初始化器使用</p>
<pre><code>class Customer(name: String) {
    val customerKey = name.toUpperCase()
}
</code></pre><p>事实上声明属性以及从主构造函数初始化属性 Kotlin 有简洁的语法</p>
<pre><code>class Person(val firstName: String, val lastName: String, var age: Int){
    // ...
}
</code></pre><p>与普通属性一样，主构造函数中声明的属性可以是可变的（var）或只读的（val）。如果构造函数有注解或可见性修饰符，这个 constructor 关键字是必需，并且这些修饰符在它前面</p>
<pre><code>class Customer public @Inject constructor(name: String) { ... }
</code></pre><h4 id="次构造函数"><a href="#次构造函数" class="headerlink" title="次构造函数"></a>次构造函数</h4><p>类也可以声明前缀有 constructor 的次构造函数</p>
<pre><code>class Person {
    constructor(parent: Person){
        parent.children.add(this)
    }
}
</code></pre><p>如果类有一个主构造函数，每个次构造函数需要委托给主构造函数，可以直接委托或者通过别的次构造函数简介委托，委托到同一个类的另一个构造函数用 this 关键字即可</p>
<pre><code>class Person(val name: String) {
    constructor(name: String, parent: Person) : this(name){
        parent.children.add(this)
    }
}
</code></pre><p>如果一个非抽象类没有声明任何（主或次）构造函数，它会有一个生成的不带参数的主构造函数。构造函数的可见性是 public。如果你不希望你的类有一个公有构造函数，你需要声明一个带有非默认可见性的空的主构造函数</p>
<pre><code>class DontCreateMe private constructor () {}
</code></pre><blockquote>
<p>注意：在 JVM 上，如果主构造函数的所有的参数都有默认值，编译器会生成一个额外的无参构造函数，它将使用默认值。这使得 Kotlin 更易于使用像 Jackson 或者 JPA 这样的通过无参构造函数创建类的实例的库。</p>
</blockquote>
<pre><code>class Customer(val customerName: String = &quot;&quot;)
</code></pre><h4 id="创建了类的实例"><a href="#创建了类的实例" class="headerlink" title="创建了类的实例"></a>创建了类的实例</h4><p>要创建一个类的实例，我们就像普通函数一样调用构造函数</p>
<pre><code>val invoiccce = Invoice()
val customer = Customer(&quot;Joe Smith&quot;)
</code></pre><p>主要 Kotlin 并没有 new 关键字</p>
<p>创建嵌套类，内部类和匿名内部类的实例在嵌套类中有述</p>
<h4 id="类成员"><a href="#类成员" class="headerlink" title="类成员"></a>类成员</h4><p>类可以包含</p>
<ul>
<li>构造函数和初始化快</li>
<li>函数</li>
<li>属性</li>
<li>嵌套类和内部类</li>
<li>对象声明</li>
</ul>
<h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><p>在 Kotlin 中所有类都有一个共同的超类 Any，这对于没有超类型声明的类是默认超类</p>
<pre><code>class Example // 从 Any 隐式继承
</code></pre><p>Any 不是 java.lang.Objec，尤其是它除了 equals(),hashCode() 和 toString() 外没有任何成员。</p>
<p>要声明一个显示的超类型，我们把类型放到类头的冒号之后</p>
<pre><code>open class Base(p: Int)
class Derivec(p: Int) : Base(p)
</code></pre><p>如果该类有一个主构造函数，其基类型可以（并且必须）用（基类型的）主构造函数参数就地初始化。</p>
<p>如果类没有主构造函数，那么每个次构造函数必须使用 super 关键字初始化其基类型，或委托给另一个构造函数做到这一点。注意在这种情况下，不同的次构造函数可以调用基类型的不同的构造函数</p>
<pre><code>class MyView : View {
    constructor(ctx: Context) : super(ctx)
    constructor(ctx: Context, attrs: AttributeSet) : super(ctx, attrs)
}
</code></pre><p>类上的 open 标注与 Java 中 final 相反，它允许其他类从这个类继承。默认情况下，在 Kotlin 中所有的类都是 final，对应于 Effective Java 书中的第 17 条：要么为继承而设计，并提供文档说明，要么就禁止继承。</p>
<h5 id="覆盖方法"><a href="#覆盖方法" class="headerlink" title="覆盖方法"></a>覆盖方法</h5><p>我们之前提到过 Kotlin 力求清晰显式，与 Java 不同，Kotlin 需要显式标注可覆盖的成员（我们称之为开放）和覆盖后的成员</p>
<pre><code>open class Base{
    open fun v() {}
    fun nv() {}
}

class Derived() : Base() {
    override fun v() {}
}
</code></pre><p>Derived.v() 函数上必须加上 override 标注，如果没写，编译器将会报错。如果函数没有标注 open 如 Base.nv()，则子类找那个不允许定义相同签名的函数，不论加不加 override。在一个 final 类中（没有用 open 标注的类），开放成员是禁止的。</p>
<p>标记为 override 的成员本身是开放的，也就是说，它可以在子类中覆盖。如果你想禁止再次覆盖，使用 final 关键字</p>
<pre><code>open class AnotherDerived() : Base() {
    final override fun v() {}
}
</code></pre><h5 id="覆盖属性"><a href="#覆盖属性" class="headerlink" title="覆盖属性"></a>覆盖属性</h5><p>覆盖属性与方法覆盖类型，在超类中声明然后在派生类中重新声明的属性必须以 override 开头，并且它们必须具有兼容的类型。每个声明的属性可以由具有初始化器的属性或者具有 getter 方法的属性覆盖，</p>
<pre><code>open class Foo {
    open val x: Int get { ... }
}

class Bar1 : Foo() {
    override val x: Int = ...
}
</code></pre><p>你也可以用一个 var 属性覆盖一个 val 属性，但反之则不行。这是允许的，因为一个 val 属性本质上声明了一个 getter 方法，而将其覆盖为 var 只是在子类中额外声明一个 setter 方法。</p>
<p>请注意，你可以在主构造函数中使用 override 关键字作为属性声明的一部分</p>
<pre><code>interface Foo {
    val count: Int
}

class Bar1(override va count: Int) : Foo

class Bar2 : Foo {
    override var count: Int = 0
}
</code></pre><h5 id="覆盖规则"><a href="#覆盖规则" class="headerlink" title="覆盖规则"></a>覆盖规则</h5><p>在 Kotlin 中，实现继承由下述规则规定：如果一个类从它的直接超类继承相同成员的多个实现，它必须覆盖这个成员并提供其自己的实现（也许用继承来的其中之一）。为了表示采用从哪个超类型继承的实现，我们使用由尖括号中超类型名限定的 super 如 super<base></p>
<pre><code>open class A {
    open fun f() { print(&quot;A&quot;)}
    fun a() { print(&quot;a&quot;) }
}

interface B {
    fun f() { print(&quot;B&quot;) } // 接口成员默认就是 “open” 的
    fun b() { print(&quot;b&quot;) }
}

class C() : A(),B {
    // 编译器要求覆盖 f():
    override fun f() {
        super&lt;A&gt;.f() // 调用 A.f()
        super&lt;B&gt;.f() // 调用 B.f()
    }

}
</code></pre><p>同时继承 A 和 B 没有问题，并且 a() 和 b() 也没问题因为 C 只继承了每个函数的一个实现。但是 f() 由 C 继承了两个实现，所以我们必须在 C 中覆盖 f() 并且提供我们自己的实现来消除歧义。</p>
<h4 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h4><p>类和其中的某些成员可以声明为 abstract，抽象成员在本类中可以不用实现。需要注意的是，我们并不需要用 open 标注一个抽象类或者函数，因为这不言而喻。</p>
<p>我们可以用一个抽象成员覆盖一个非抽象的开放成员</p>
<pre><code>open class Base {
    open fun f() {}
}

abstract class Derived : Base() {
    override abstract fun f()
}
</code></pre><h4 id="伴生对象"><a href="#伴生对象" class="headerlink" title="伴生对象"></a>伴生对象</h4><p>与 Java 或 C# 不同，在 Kotlin 中类没有静态方法。在大多数情况下，它建议简单地使用包级函数。</p>
<p>如果你需要写一个可以无需用一个类的实例来调用，但需要访问类内部的函数（例如工程方法），你可以把它写成该类内对象声明中的一员。</p>
<p>更具体地讲，如果在你的类内声明了一个伴生对象，你就可以使用像在 Java/C# 中调用静态方法相同的语法来调用其成员，只使用类名作为限定符。</p>
<h3 id="属性和字段"><a href="#属性和字段" class="headerlink" title="属性和字段"></a>属性和字段</h3><h4 id="声明属性"><a href="#声明属性" class="headerlink" title="声明属性"></a>声明属性</h4><p>Kotlin 的类可以有属性，属性可以用关键字 var 声明为可变的，否则使用只读关键字 val。</p>
<pre><code>class Address {
    var name: String = ...
    var street: String = ...
    var city: String = ...
    var state: String? = ...
    var zip: String = ...
}
</code></pre><p>要使用一个属性，只要用名称引用它即可，就像 Java 中的字段</p>
<pre><code>fun copyAddress(address: Address): Address {
    val result = Address() // Kotlin 中没有“new”关键字
    result.name = address.name // 将调用访问器
    result.street = address.street
    // ...
    return result
}
</code></pre><h4 id="Getters-和-Setters"><a href="#Getters-和-Setters" class="headerlink" title="Getters 和 Setters"></a>Getters 和 Setters</h4><p>声明一个属性的完整语法是</p>
<pre><code>var &lt;propertyName&gt;[: &lt;PropertyType&gt;] [= &lt;property_initializer&gt;]
    [&lt;getter&gt;]
    [&lt;setter&gt;]
</code></pre><p>其初始器（initializer）,getter 和 setter 都是可选的。属性类型如果可以从初始化器（或者从其 getter 返回值，如下文所示）中推断出来，也可以省略</p>
<pre><code>var allByDefault: Int? // 错误：需要显式初始化器，隐含默认 getter 和 setter
var initialized = 1 // 类型 Int，默认 getter 和 setter
</code></pre><p>一个只读属性的语法和一个可变的属性的语法有两方面的不同：1 只读属性的用 val 开始替代 var ，2 只读属性不允许 setter</p>
<pre><code>val simple: Int? // 类型 Int 默认 getter 必须在构造函数中初始化
val inferredType = 1 // 类型 Int 默认 getter
</code></pre><p>我们可以编写自定义的访问器，非常像普通函数，刚好在属性声明内部。这里有一个自定义 getter 的例子</p>
<pre><code>val isEmpty: Boolean
    get() = this.size == 0
</code></pre><p>一个自定义的 setter 的例子</p>
<pre><code>var stringRepresentation: String
    get() = this.toString()
    set(value) {
        setDataFromString(value) // 解析字符串并赋值给其他属性
    }
</code></pre><p>按照惯例 setter 参数的名称是 value，但是如果你喜欢你可以选择一个不同的名称。</p>
<p>自 Kotlin 1.1 起，如果可以从 getter 推断出属性类型，则可以省略它</p>
<pre><code>val isEmpty get() = this.size ==0 // 具有类型 Boolean
</code></pre><p>如果你需要改变一个访问器的可见性或者对其注解，但是不需要改变默认的实现，你可以定义访问器而不定义其实现</p>
<pre><code>var setterVisibility: String = &quot;abc&quot;
    private set // 此 setter 是私有的并且有默认实现

var setterWithAnnotation: Any? = null
    @Inject set // 用 Inject 注解此 setter
</code></pre><h4 id="幕后字段"><a href="#幕后字段" class="headerlink" title="幕后字段"></a>幕后字段</h4><p>Kotlin 中类不能有字段，然而当使用自定义访问器时，有时有一个幕后字段（backing field） 有时是必要的。为此 Kotlin 提供一个自动幕后字段，它可通过使用 field 标识符访问。</p>
<pre><code>var counter = 0 // 此初始器值直接写入到幕后字段
    set(value) {
        if(value &gt;= 0)
        field = value
    }
</code></pre><p>filed 标识符只能用在属性的访问器内</p>
<p>如果属性至少一个访问器使用默认实现，或者自定义访问器通过 field 引用幕后字段，将会为该属性生成一个幕后字段。</p>
<p>列如，下面的情况下，就没有幕后字段</p>
<pre><code>val isEmpty: Boolean
    get() = this.size == 0
</code></pre><h4 id="幕后属性"><a href="#幕后属性" class="headerlink" title="幕后属性"></a>幕后属性</h4><p>如果你的需求不符合这套“隐式的幕后字段”方案。那么总可以使用幕后属性（backing property）</p>
<pre><code>private var _table: Map&lt;String, Int&gt;? = null
public val table: Map&lt;String, Int&gt;
    get() {
        if(_table == null) {
            _table = HashMap() // 类型参数已推断出
        }
        return _table ?: throw AssertionError(&quot;Set to null by another thread&quot;)
    }
</code></pre><p>从各方面看，这正是与 Java 相同的方法。因为通过默认 getter 和 setter 访问私有属性会被优化，所以不会引入函数调用开销。</p>
<h4 id="编译期常量"><a href="#编译期常量" class="headerlink" title="编译期常量"></a>编译期常量</h4><p>已知值的属性可以使用 const 修饰符标记为编译期常量，这些属性需要满足以下要求</p>
<ul>
<li>位于顶层或者是 object 的一个成员</li>
<li>用 String 或原生类型值初始化</li>
<li>没有自定义 getter</li>
</ul>
<p>这些属性可以用在注解中</p>
<pre><code>const val SUBSYSTEM_DEPRECATED: String = &quot;This subsystem is deprecated&quot;
@Deprecated(SUBSYSTEM_DEPRECATED) fun foo() { ... }
</code></pre><h4 id="惰性初始化属性"><a href="#惰性初始化属性" class="headerlink" title="惰性初始化属性"></a>惰性初始化属性</h4><p>一般地，属性声明为非空类型必须在构造函数中初始化。然而这经常不方便，例如：属性可以通过依赖注入来初始化，或者在单元测试的 setup 方法中初始化。这种情况下，你不能再构造函数内提供一个非空初始器，但你仍然想在类体中引用该属性时避免空检查。</p>
<p>为处理这种情况，你可以用 lateinit 修饰符标记该属性</p>
<pre><code>public class MyTest {
    lateinit var subject: TestSubject

    @SetUp fun setup() {
        subject = TestSubject()
    }

    @Test fun test() {
        subject.method() // 直接解引用
    }
}
</code></pre><p>该修饰符只能用于在类体中（不是在主构造函数中）声明的 var 属性，并且仅当该属性没有自定义 getter 或 setter 时。该属性必须是非空类型，并且不能是原生类型。</p>
<p>在初始化前访问一个 lateinit 属性会抛出一个特定异常，该异常明确标识该属性被访问及它没有初始化的事实</p>
<h4 id="覆盖属性-1"><a href="#覆盖属性-1" class="headerlink" title="覆盖属性"></a>覆盖属性</h4><p>参见覆盖属性</p>
<h4 id="委托属性"><a href="#委托属性" class="headerlink" title="委托属性"></a>委托属性</h4><p>最常见的一类属性就是简单地从幕后字段中读取（以及可能的写入），另一方面使用自定义 getter 和 setter 可以实现属性的任何行为。介于两者之间，属性如何工作有一些常见的模式。一些例子：惰性值，通过键值从映射读取，访问数据库，访问时通知侦听器等等。</p>
<p>这些常见行为可以通过使用委托属性实现为库。</p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    







                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/07/18/Android 面试三/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/07/20/Kotlin 之旅五/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/daily_pic.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="http://imgtu.5011.net/uploads/content/20170620/9403141497925594.jpg" alt="Koc's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        kocd726@163.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: kocd726@163.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/07/">七月 2017<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">2</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    
        <li>
            <a href="/about" title="About">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                About
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">10</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.svg);">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.svg);">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-gplus.svg);">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/chihaiyishen" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.svg);">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;痴海博客
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->

    <script src="/js/lazyload.min.js"></script>
    <script src="/js/js.min.js"></script>



    <script src="/js/nprogress.js"></script>


<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>
















<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script>
    <!-- Offer LazyLoad -->
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    <!-- Start Queue -->
    $(document).ready(function(){
        setTimeout(function(){
            setInterval(function(){
                queue.execNext();
            },200);
        },3000);
    });
</script>

                </main>
            </div>
        </body>
    
</html>
